---
date: 2024-04-28
tags:
  - pf/嵌入式
  - status/done
---

大端：高地址存低字节，低地址存高字节

小端：低地址存低字节，高地址存高字节

以0x1234为例进行说明

| **地址** | **0x4000（低地址）** | **0x4001（高地址）** |
| ------ | --------------- | --------------- |
| 大端存储   | 0x12            | 0x34            |
| 小端存储   | 0x34            | 0x12            |

人类读写数据习惯是大端字节序，大数据先读，小数据后读。所以==小端是反人类==的方式

| 处理器   | 端模式             |
|----------|--------------------|
| IntelX86 | Little-Endian      |
| ARM、DSP | 默认 Little-Endian |
| STM32    | Little-Endian      |
| KEIL C51 | Big-Endian         |
| Power-PC | Big-Endian         |
| IBM      | Big-Endian         |

检测大端模式小端模式代码

```c
union A
{
    short s;
    char c[2];
};
union A a;
a.s = 0x0102;
if (a.c[0] == 0x01 && a.c[1] == 0x02)
    printf("Big Endian\n");
else if (a.c[0] == 0x02 && a.c[1] == 0x01)
    printf("Little Endian\n");
```

谁更好？

小端模式：强制类型转换数据不需要调整字节内容。

大端模式：符号位判断固定为第一个字节，容易判断正负，便于人类阅读。

总结：大小端没有谁更优更劣，各种优点就是对方劣势。
