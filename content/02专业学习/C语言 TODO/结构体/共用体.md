---
title: 共用体
date: 2024-04-16 22:44:26
tags: 
---

共用体是一种特殊的数据类型，允许您在==相同的内存位置==存储==不同的数据类型==。您可以定义一个带有多成员的共用体，但是==任何时候只能有一个成员带有值==。
定义共用体
使用 union 语句，方式与定义结构类似

union \[union tag\]

{

member definition;

member definition;

...

member definition;

} \[one or more union variables\];

union tag 是可选的，每个 member definition 是标准的变量定义，

在共用体定义的末尾，最后一个分号之前，您可以指定一个或多个共用体变量，这是可选的。

共用体占用的内存应足够存储共用体中==最大的成员==。
访问共用体成员
使用成员访问运算符（.），实例：

\#include \<stdio.h\>

\#include \<string.h\>

union Data

{

int i;

float f;

char str\[20\];

};

int main( )

{

union Data data;

data.i = 10;

data.f = 220.5;

strcpy( data.str, "C Programming");

printf( "data.i : %d\n", data.i);

printf( "data.f : %f\n", data.f);

printf( "data.str : %s\n", data.str);

return 0;

}

结果：

data.i : 1917853763

data.f : 4122360580327794860452759994368.000000

data.str : C Programming

在这里，我们可以看到共用体的 i 和 f 成员的值有损坏，因为==最后赋给变量的值占用了内存位置==，这也是 str 成员能够完好输出的原因。
