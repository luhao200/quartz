---
title: 函数
date: 2024-04-16 22:44:26
tags: 
---

定义函数

  C 语言中的函数定义的一般形式如下：

    return\_type function\_name( parameter list )

    {

    body of the function

    }

  在 C 语言中，函数由一个函数头和一个函数主体组成。下面列出一个函数的所有组成部分：

  ==返回类型==：一个函数可以返回一个值。return\_type 是函数返回的值的数据类型。有些函数执行所需的操作而不返回值，在这种情况下，return\_type 是关键字== void==。

  ==函数名称==：这是函数的实际名称。函数名和参数列表一起构成了函数签名。

  ==参数==：参数就像是占位符。当函数被调用时，您向参数传递一个值，这个值被称为实际参数。参数列表包括函数参数的类型、顺序、数量。参数是可选的，也就是说，函数可能不包含参数。

  ==函数主体==：函数主体包含一组定义函数执行任务的语句。

实例

  以下是 max() 函数的源代码。该函数有两个参数 num1 和 num2，会返回这两个数中较大的那个数：

    /\* 函数返回两个数中较大的那个数 \*/

    int max(int num1, int num2)

    {

    /\* 局部变量声明 \*/

    int result;

    if (num1 > num2) {

    result = num1;

    } else {

    result = num2;

    }

    return result;

    }

函数声明

  函数声明会告诉编译器函数名称及如何调用函数。函数的实际主体可以单独定义。

  函数声明包括以下几个部分：

  return\_type function\_name( parameter list );

  针对上面定义的函数 max()，以下是函数声明：

  int max(int num1, int num2);

  在==函数声明中==，==参数的名称并不重要==，只有==参数的类型==是必需的，因此下面也是有效的声明：

  int max(int, int);

  当您在一个源文件中定义函数且在另一个文件中调用函数时，函数声明是必需的。在这种情况下，您应该在调用==函数的文件顶部声明函数==。

函数参数

| 调用类型 | 描述                                                   |
| ---- | ---------------------------------------------------- |
| 传值调用 | 该方法把参数的==实际值复制==给函数的形式参数。在这种情况下，修改函数内的形式参数不会影响实际参数。  |
| 引用调用 | 通过==指针传递==方式，形参为指向实参地址的指针，当对形参的指向操作时，就相当于对实参本身进行的操作。 |

内部函数

  如果一个函数只能被本文件中其他函数所调用，它称为内部函数。在定义内部函数时，在函数名和函数类型的前面加 static，即

  ==static 类型名 函数名 （形参表）==

  例如，函数的首行：

  static int max(int a,int b)

  内部函数又称静态函数。使用内部函数，可以使函数的作用域只局限于所在文件。即使在不同的文件中有同名的内部函数，也互不干扰。提高了程序的可靠性。

外部函数

  如果在定义函数时，在函数的首部的最左端加关键字 extern，则此函数是外部函数，可供其它文件调用。

  如函数首部可以为

  extern int max (int a,int b)

  C 语言规定，如果在==定义函数时省略 extern，则默认为外部函数==。

  在==需要调用此函数的其他文件中，需要对此函数作声明==（不要忘记，即使在本文件中调用一个函数，也要用函数原型来声明）。在==对此函数作声明时，要加关键字 extern==，表示该函数是在其他文件中定义的外部函数。

- [ ] 变长参数

回调函数

  实例中 populate\_array() 函数定义了三个参数，其中第三个参数是函数的指针，通过该函数来设置数组的值。

  实例中我们定义了回调函数 getNextRandomValue()，它返回一个随机值，它作为一个函数指针传递给 populate\_array() 函数。

  populate\_array() 将调用 10 次回调函数，并将回调函数的返回值赋值给数组。实例：

    // 回调函数

    void populate\_array(int \*array, int arraySize, int (\*getNextValue)(void))

    {

    int i;

    for(i=0; i<arraySize; i++){

    \*(array+i) = getNextValue();

    }

    }

    // 获取随机值

    int getNextRandomValue(void)

    {

    return rand();

    }

    int main(void)

    {

    int myarray\[10\];

    int i;

    populate\_array(myarray, 10, getNextRandomValue);

    for(i=0; i<10; i++) {

    printf("%d ", myarray\[i\]);

    }

    printf("\\n");

    return 0;

    }

    
