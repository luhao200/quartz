---
title: 头文件
date: 2024-04-16 22:44:26
tags: 
---

头文件是扩展名为 .h 的文件，包含了 C ==函数声明和宏定义==，被多个源文件中引用共享。有两种类型的头文件：程序员编写的头文件和编译器自带的头文件。
A simple practice in C 或 C++ 程序中，建议把==所有的常量、宏、系统全局变量和函数原型==写在头文件中，在需要的时候随时引用这些头文件。
引用头文件的语法
\#include \<file\>

这种形式用于引用==系统头文件==。它在系统目录的标准列表中搜索名为 file 的文件。

\#include "file"

这种形式用于引用==用户头文件==。它在包含当前文件的目录中搜索名为 file 的文件。在编译源代码时，您可以通过 ==-I 选项把目录前置在该列表前==。

（可用cmake改变）
只引用一次头文件
如果一个头文件被引用两次，编译器会处理两次头文件的内容，这将产生错误。为了防止这种情况，==标准的做法==是把文件的整个内容放在条件编译语句中，如下：

\#ifndef HEADER_FILE

\#define HEADER_FILE

the entire header file file

\#endif

这种结构就是通常所说的包装器 \#ifndef。当再次引用头文件时，条件为假，因为 HEADER_FILE 已定义。此时，预处理器会跳过文件的整个内容，编译器会忽略它。
有条件引用
有时需要从多个不同的头文件中选择一个引用到程序中。例如，需要指定在不同的操作系统上使用的配置参数。您可以通过一系列条件来实现这点，如下：

\#if SYSTEM_1

\# include "system_1.h"

\#elif SYSTEM_2

\# include "system_2.h"

\#elif SYSTEM_3

...

\#endif

但是如果头文件比较多的时候，这么做是很==不妥当==的，预处理器使用宏来定义头文件的名称。这就是所谓的有条件引用。它不是用头文件的名称作为 \#include 的直接参数，您只需要使用宏名称代替即可：

\#define SYSTEM_H "system_1.h"

...

\#include SYSTEM_H

SYSTEM_H 会扩展，预处理器会查找 system_1.h，就像 \#include 最初编写的那样。SYSTEM_H 可通过 -D 选项被您的 ==Makefile== 定义。
