---
title: 结构体
date: 2024-04-16 22:44:26
tags: 
---

结构是 C 编程中另一种用户自定义的可用的数据类型，它允许您存储不同类型的数据项。
结构体中的数据成员可以是基本数据类型（如 int、float、char 等），也可以是==其他结构体类型、指针类型==等。
定义结构
struct tag {

  member-list

  member-list

  member-list 

  ...

} variable-list ;

tag 是结构体标签。

member-list 是标准的变量定义，比如 int i; 或者 float f;，或者其他有效的变量定义。

variable-list 结构变量，定义在结构的末尾，最后一个分号之前，您可以指定一个或多个结构变量。

三种方式

声明了拥有3个成员的结构体，同时又声明了结构体变量s1，这个结构体并没有标明其标签

struct

{

int a;

char b;

double c;

} s1;

声明了拥有3个成员的结构体，结构体的标签被命名为SIMPLE,没有声明变量

struct SIMPLE

{

int a;

char b;

double c;

};

用SIMPLE标签的结构体，另外声明了变量t1、t2、t3

struct SIMPLE t1, t2\[20\], \*t3;

用typedef创建新类型

typedef struct

{

int a;

char b;

double c;

} Simple2;

现在可以用Simple2作为类型声明新的结构体变量

Simple2 u1, u2\[20\], \*u3;

结构体的成员可以包含其他结构体，也可以包含==指向自己结构体类型的指针==，而通常这种指针的应用是为了实现一些更高级的数据结构如链表和树等。

此结构体的声明包含了其他的结构体

struct COMPLEX

{

  char string\[100\];

  struct SIMPLE a;

};

此结构体的声明包含了指向自己类型的指针

struct NODE

{

  char string\[100\];

  struct NODE \*next_node;

};
结构体变量的初始化
在定义时指定初始值，实例：

struct Books

{

 char title\[50\];

 char author\[50\];

 char subject\[100\];

 int  book_id;

} book = {"C 语言", "RUNOOB", "编程语言", 123456};

第二种：

struct student{

int id;

char \*name;

int age;

};

struct student stu1 = {.id=1, .name="张三", .age=18};
访问结构成员
使用成员访问运算符（.）
结构作为函数参数
您可以把结构作为函数参数，传参方式与其他类型的变量或指针类似。
==指向结构的指针==
可以定义指向结构的指针，方式与定义指向其他类型变量的指针相似，如下所示：

struct Books \*struct_pointer;

现在，您可以在上述定义的指针变量中存储结构变量的地址。为了查找结构变量的地址，请把 & 运算符放在结构名称的前面，如下所示：

struct_pointer = &Book1;

为了使用指向该结构的指针访问结构的成员，您必须==使用 -\> 运算符==，如下所示：

struct_pointer-\>title;

[实例](https://www.runoob.com/cprogramming/c-structures.html#:~:text=%E6%8C%87%E9%92%88%E7%9A%84%E6%A6%82%E5%BF%B5%EF%BC%9A-,%E5%AE%9E%E4%BE%8B,-%23include%20%3Cstdio.h)
结构体大小的计算
对于结构体，sizeof 将返回结构体的总字节数，包括所有成员变量的大小以及可能的填充字节。

结构体的大小可能会受到编译器的优化和对齐规则的影响，编译器可能会在结构体中插入一些额外的填充字节以对齐结构体的成员变量，

以提高内存访问效率。因此，==结构体的实际大小可能会大于成员变量大小的总和==，

如果你需要确切地了解结构体的内存布局和对齐方式，可以使用 offsetof 宏和 \_\_attribute\_\_((packed)) 属性等进一步控制和查询结构体的大小和对齐方式。
