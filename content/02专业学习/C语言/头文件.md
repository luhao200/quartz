---
date: 2024-05-09
tags:
  - pf/C语言
  - status/done
url: https://www.runoob.com/cprogramming/c-header-files.html
---

头文件是扩展名为 **.h** 的文件，包含了 C **函数声明和宏定义**，被多个源文件中引用共享。

在程序中要使用头文件，需要使用 C [预处理器](预处理器.md)指令 `#include` 来引用它。

引用头文件**相当于复制头文件的内容**，但是我们不会直接在源文件中复制头文件的内容，因为这么做很容易出错，特别在程序是由多个源文件组成的时候。

#import/pf 建议把**所有的常量、宏、系统全局变量和函数原型**写在头文件中，在需要的时候随时引用这些头文件。

## 引用头文件的语法

使用预处理指令 `#include` 可以引用用户和系统头文件。它的形式有以下两种：

```c
#include <file>
```

这种形式用于引用系统头文件。它在系统目录的标准列表中搜索名为 file 的文件。在**编译源代码**时，您可以通过 -I 选项把目录前置在该列表前。

```c
#include "file"
```

这种形式用于引用用户头文件。它在包含当前文件的目录中搜索名为 file 的文件。在编译源代码时，您可以通过 -I 选项把目录前置在该列表前。

## 只引用一次头文件

#import/pf

如果一个头文件被引用两次，[编译器](../../01工具使用/编译原理/编译器.md)会处理两次头文件的内容，这将产生错误。为了防止这种情况，标准的做法是把文件的整个内容放在条件编译语句中，如下：

```c
#ifndef HEADER_FILE
#define HEADER_FILE

the entire header file file

#endif
```

这种结构就是通常所说的包装器 `#ifndef`。当再次引用头文件时，条件为假，因为 HEADER_FILE 已定义。此时，[预处理器](预处理器.md)会跳过文件的整个内容，[编译器](../../01工具使用/编译原理/编译器.md)会忽略它。

## 有条件引用

有时需要从多个不同的头文件中选择一个引用到程序中。例如，需要指定在不同的操作系统上使用的配置参数。您可以通过一系列条件来实现这点，如下：

```c
#if SYSTEM_1
   # include "system_1.h"
#elif SYSTEM_2
   # include "system_2.h"
#elif SYSTEM_3
   ...
#endif
```

但是如果头文件比较多的时候，这么做是很不妥当的，[预处理器](预处理器.md)使用宏来定义头文件的名称。这就是所谓的**有条件引用**。它不是用头文件的名称作为 `#include` 的直接参数，您只需要使用宏名称代替即可：

```c
 #define SYSTEM_H "system_1.h"
 ...
 #include SYSTEM_H
```

SYSTEM_H 会扩展，[预处理器](预处理器.md)会查找 system_1.h，就像 `#include` 最初编写的那样。SYSTEM_H 可通过 -D 选项被您的 [Makefile](../../01工具使用/编译原理/Makefile.md) 定义。

## 标准库头文件

C 标准库头文件（Standard Library Header Files）是由 ANSI C（也称为 C89/C90）和 ISO C（C99 和 C11）标准定义的一组头文件，这些头文件提供了大量的函数、宏和类型定义，用于处理输入输出、字符串操作、数学计算、内存管理等常见的编程任务。

以下是一些常见的 C 标准库头文件及其功能简介：

| 头文件            | 功能简介                            |
| -------------- | ------------------------------- |
| **<stdio.h>**  | 标准输入输出库，包含 `printf`、`scanf` 等函数 |
| **<stdlib.h>** | 标准库函数，包含内存分配、程序控制等函数            |
| **<string.h>** | 字符串操作函数，如 `strlen`、`strcpy` 等   |
| **<math.h>**   | 数学函数库，如 `sin`、`cos`、`sqrt` 等    |
| **<time.h>**   | 时间和日期函数，如 `time`、`strftime` 等   |
| **<ctype.h>**  | 字符处理函数，如 `isalpha`、`isdigit` 等  |
| **<limits.h>** | 定义各种类型的限制值，如 `INT_MAX` 等        |
| **<float.h>**  | 定义浮点类型的限制值，如 `FLT_MAX` 等        |
| **<assert.h>** | 断言宏 `assert`，用于调试检查             |
| **<errno.h>**  | 定义错误码变量 `errno` 及相关宏            |
| **<stddef.h>** | 定义通用类型和宏，如 `size_t`、`NULL` 等    |
| **<signal.h>** | 处理信号的函数和宏，如 `signal` 等          |
| **<setjmp.h>** | 提供非本地跳转功能的宏和函数                  |
| **<locale.h>** | 地域化相关的函数和宏，如 `setlocale` 等      |