---
date: 2024-05-06
tags:
  - status/done
  - pf/C语言
url: https://www.runoob.com/cprogramming/c-storage-classes.html
---
存储类定义 C 程序中变量/函数的**存储位置、生命周期和[作用域](作用域.md)**。
这些说明符放置在它们所修饰的类型之前。
下面列出 C 程序中可用的存储类：
- auto
- register
- static
- extern

## auto 存储类

**auto** 存储类是所有**局部变量默认**的存储类。

定义在函数中的变量默认为 auto 存储类，这意味着它们在函数开始时被创建，在函数结束时被销毁。

```c
{
   int mount;
   auto int month;
}
```

上面的实例定义了两个带有相同存储类的变量，auto 只能用在函数内，即 auto 只能修饰局部变量。

## register 存储类 

#import/pf 
**register** 存储类用于定义**存储在寄存器中而不是 RAM 中**的**局部变量**。这意味着**变量的最大尺寸等于寄存器的大小（通常是一个字）**，且**不能对它应用一元的 '&' 运算符（因为它没有内存位置）**。

register 存储类定义存储在寄存器，所以变量的访问速度更快，但是它**不能直接取地址**，因为它不是存储在 RAM 中的。在需要频繁访问的变量上使用 register 存储类可以提高程序的运行速度。

```c
{
   register int  miles;
}
```

**寄存器只用于需要快速访问的变量，比如计数器**。还应注意的是，**定义 'register' 并不意味着变量将被存储在寄存器中，它意味着变量可能存储在寄存器中，这取决于硬件和实现的限制**。

## static 存储类 

#import/pf
**static** 存储类指示编译器在程序的生命周期内保持局部变量的存在，而不需要在每次它进入和离开作用域时进行创建和销毁。
因此，使用 static 修饰局部变量可以在函数调用之间保持局部变量的值。
**static 修饰符也可以应用于全局变量**。当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。

## extern 存储类

**extern** 存储类用于定义在其他文件中声明的全局变量或函数。当使用 extern 关键字时，不会为变量分配任何存储空间，而只是指示编译器该变量在其他文件中定义。
**extern** 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。当您使用 **extern** 时，对于无法初始化的变量，会把变量名指向一个之前定义过的存储位置。
当您有多个文件且定义了一个可以在其他文件中使用的全局变量或函数时，可以在其他文件中使用 **extern** 来得到已定义的变量或函数的引用。可以这么理解，**extern** 是用来在另一个文件中声明一个全局变量或函数。

```c
extern int a;     // 声明一个全局变量 a
int a;            // 定义一个全局变量 a
extern int a =0;  // 定义一个全局变量 a 并给初值。一旦给予赋值，一定是定义，定义才会分配存储空间
int a =0;         //定义一个全局变量 a，并给初值
```

声明之后你不能直接使用这个变量，需要定义之后才能使用。
第四个等于第三个，都是定义一个可以被外部使用的全局变量，并给初值。
糊涂了吧，他们看上去可真像。但是**定义只能出现在一处**。也就是说，不管是 int a 还是 int a=0 都只能出现一次，而那个 **extern int a 可以出现很多次**。
当你要引用一个全局变量的时候，你就要声明 extern int a 这时候 extern 不能省略，因为省略了，就变成 int a 这是一个定义，不是声明。

[如果需要在一个源文件中引用另外一个源文件中定义的变量，我们只需在引用的文件中将变量加上 extern 关键字的声明即可。](https://www.runoob.com/cprogramming/c-variables.html#:~:text=%E5%A6%82%E6%9E%9C%E9%9C%80%E8%A6%81%E5%9C%A8%E4%B8%80%E4%B8%AA%E6%BA%90%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BC%95%E7%94%A8%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E6%BA%90%E6%96%87%E4%BB%B6%E4%B8%AD%E5%AE%9A%E4%B9%89%E7%9A%84%E5%8F%98%E9%87%8F%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AA%E9%9C%80%E5%9C%A8%E5%BC%95%E7%94%A8%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%AD%E5%B0%86%E5%8F%98%E9%87%8F%E5%8A%A0%E4%B8%8A%20extern%20%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E5%A3%B0%E6%98%8E%E5%8D%B3%E5%8F%AF%E3%80%82)
